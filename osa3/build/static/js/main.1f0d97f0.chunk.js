(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(42)},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),i=n.n(l),o=n(11),u=n(12),s=n(14),c=n(13),m=n(15),d=n(2),f=n.n(d),h="/api/persons",p={getAll:function(){var e=f.a.get(h);return console.log("persons getAll:",e),e.then(function(e){return e.data})},create:function(e){return f.a.post(h,e).then(function(e){return e.data})},update:function(e,t){return console.log("person update:",e," ",t),f.a.put("".concat(h,"/").concat(e),t).then(function(e){return e.data})},deletePerson:function(e){return f.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.data})}},E=(n(40),function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.handleAddEntry},r.a.createElement("div",null,"nimi:",r.a.createElement("input",{value:e.newName,onChange:e.handleEntryChange})),r.a.createElement("div",null,"numero:",r.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4"))))}),g=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)},v=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,e.nimi))},b=function(e){return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4v\xe4:",r.a.createElement("input",{value:e.filter,onChange:e.filterChange}))},w=function(e){var t=e.persons,n=e.deleteHandler,a=e.filter,l=void 0===a?"":a,i=""===l?t:t.filter(function(e){return e.name.toLowerCase().startsWith(l.toLowerCase())});return r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,i.map(function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:n,id:e.id},"Poista")))}))))},N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(c.a)(t).call(this,e))).addEntry=function(e){e.preventDefault();var t={name:n.state.newName,number:n.state.newNumber},a=n.state.persons.find(function(e){return e.name===t.name});if(a){var r=a.name.concat(" [",a.id,"] on jo luettelossa, korvataanko vanha numero uudella?");window.confirm(r)&&(a.number=t.number,p.update(a.id,a).then(function(e){console.log(e),n.setState({persons:n.state.persons,info:"korvattiin ".concat(a.name).concat(" numero: ",a.number)})}).catch(function(e){n.setState({info:"henkil\xf6 '".concat(a.name,"' on poistettu palvelimelta"),persons:n.state.persons.filter(function(e){return e.id!==a.id})}),setTimeout(function(){n.setState({info:null})},5e3)}))}else null==a&&p.create(t).then(function(e){console.log("AddEntry: respnse: ",e),n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",info:"lis\xe4ttiin ".concat(e.name)}),setTimeout(function(){n.setState({info:null})},5e3)})},n.handleEntryChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){n.setState({filter:e.target.value})},n.handleDelete=function(e){if(console.log("handleDelete: [",e.target.id,"]"),e.target.id){var t=n.state.persons.find(function(t){return String(t.id)===String(e.target.id)});t&&window.confirm("Poistetaanko ".concat(t.name).concat(" [",e.target.id,"]?"))&&p.deletePerson(t.id).then(function(e){console.log(e);var a=n.state.persons.filter(function(e){return e.id!==t.id});n.setState({persons:a,info:"poistettiin ".concat(t.name)})}).catch(function(e){n.setState({info:"henkil\xf6 '".concat(t.name,"' on jo valitettavasti poistettu palvelimelta"),persons:n.state.persons.filter(function(e){return e.id!==t.id})}),setTimeout(function(){n.setState({info:null})},5e3)})}},n.state={persons:[],newName:"",newNumber:"",filter:"",info:null},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("persons did mount"),p.getAll().then(function(t){e.setState({persons:t})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(v,{nimi:"Puhelinluettelo"}),r.a.createElement(g,{message:this.state.info}),r.a.createElement(b,{filter:this.state.filter,filterChange:this.handleFilterChange}),r.a.createElement(v,{nimi:"Lis\xe4\xe4 uusi"}),r.a.createElement(E,{handleAddEntry:this.addEntry,newName:this.state.newName,handleEntryChange:this.handleEntryChange,newNumber:this.state.newNumber,handleNumberChange:this.handleNumberChange}),r.a.createElement(v,{nimi:"Numerot"}),r.a.createElement(w,{persons:this.state.persons,filter:this.state.filter,deleteHandler:this.handleDelete}))}}]),t}(r.a.Component);i.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.1f0d97f0.chunk.js.map