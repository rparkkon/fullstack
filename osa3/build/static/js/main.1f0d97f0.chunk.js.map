{"version":3,"sources":["services/persons.js","components/UusiHenkilo.js","components/Notification.js","components/Otsikko.js","components/Suodatus.js","components/Names.js","App.js","index.js"],"names":["baseUrl","services_persons","getAll","request","axios","get","console","log","then","response","data","create","newObject","post","update","id","put","concat","deletePerson","delete","UusiHenkilo","props","react_default","a","createElement","onSubmit","handleAddEntry","value","newName","onChange","handleEntryChange","newNumber","handleNumberChange","type","Notification","_ref","message","className","Otsikko","nimi","Suodatus","filter","filterChange","Names","persons","deleteHandler","_ref$filter","filtered","person","name","toLowerCase","startsWith","map","key","number","onClick","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addEntry","event","preventDefault","entryObject","state","result","find","msg","window","confirm","personService","setState","info","catch","error","n","setTimeout","target","handleFilterChange","handleDelete","personToDelete","String","_this2","components_Otsikko","components_Notification","components_Suodatus","components_UusiHenkilo","components_Names","React","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.1f0d97f0.chunk.js","sourcesContent":["import axios from 'axios'\n//const baseUrl = 'http://192.168.224.153:3001/api/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n   const request = axios.get(baseUrl)\n   console.log('persons getAll:',  request)\n   return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject) \n  return request.then(response => response.data) \n}\n\nconst update = (id, newObject) => {\n  console.log('person update:',  id, ' ' , newObject)\n  const request =  axios.put(`${baseUrl}/${id}`, newObject) \n    return request.then(response => response.data) \n}\n\nconst deletePerson = (id) => {\n//    HTTP DELETE\n    const request = axios.delete(`${baseUrl}/${id}`) \n    return request.then(response => response.data) \n  }\n\nexport default { getAll, create, update, deletePerson }","import React from 'react';\n\n// 2.10 uuden henkilön lomake\nconst  UusiHenkilo = (props) =>  {\n  //console.log('NewPerson: ' )\n  return ( \n  <div>\n    <form  onSubmit={props.handleAddEntry}>\n    <div>\n      nimi: \n      <input \n        value={props.newName}\n        onChange={props.handleEntryChange}\n      />\n    </div>\n    <div>\n      numero: \n      <input \n        value={props.newNumber}\n        onChange={props.handleNumberChange}\n      />\n    </div>\n    <div>\n      <button type=\"submit\">lisää</button>\n    </div>\n    </form>\n  </div>\n  )\n}\n\nexport default UusiHenkilo","import React from 'react';\n\n//2.18 puhelinluettelo osa 11 parempi virhe\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React from 'react';\n\nconst Otsikko = (props) =>  {\n    return ( \n      <div>\n          <h1>{props.nimi}</h1>\n      </div>\n    )\n}\nexport default Otsikko","import React from 'react';\n\n// 2.9 suodatus\nconst Suodatus = (props) =>  {\n  //console.log('Suodatus: ',  props.filter )\n  return ( \n    <div>\n    rajaa näytettävä: \n    <input \n        value={props.filter}\n        onChange={props.filterChange}\n        />\n    </div>\n  )\n}\n\nexport default Suodatus","import React from 'react';\n\nconst Names = ({ persons, deleteHandler, filter = ''}) => {\n  //console.log('Names: ', persons , ' ', filter )\n\n  const filtered = filter === '' ?  persons : persons.filter(person => {return person.name.toLowerCase().startsWith(filter.toLowerCase()) })\n//  console.log('filtered: ',filtered )\n  const namemap  = () => filtered.map(name => \n  <tr key={name.name}>\n    <td>{name.name}</td>\n    <td>{name.number}</td>\n    <td><button onClick={deleteHandler} id={name.id}>Poista</button></td>\n  </tr>)\n\n  return (\n    <div>\n      <table><tbody>\n      {namemap()}\n      </tbody></table>\n    </div>\n  )\n}\nexport default Names","import React from 'react';\nimport personService from './services/persons'\nimport './index.css'\n\n// Tehtävän 3.9. yhteydessä: Komponentit omiin tiedostoihin\nimport UusiHenkilo from './components/UusiHenkilo'\nimport Notification from './components/Notification'\nimport Otsikko from './components/Otsikko'\nimport Suodatus from './components/Suodatus'\nimport Names from './components/Names'\n\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      newName: '',\n      newNumber: '',\n      filter: '',\n      // 2.18 parempi virheilmoitus \n      info: null\n    }\n  }\n\n// 2.11 data palvelimelta\ncomponentDidMount() {\n    console.log('persons did mount')\n\n// 2.14 data palvelimelta,  2.15 moduulissa\npersonService\n      .getAll()\n      .then(response => {\n        this.setState({persons: response})\n      })\n  }\n\n  addEntry = (event) => {\n    event.preventDefault()\n    //console.log('addEntry: ', this.state.newName)\n    //console.log(event.target)\n    const entryObject = {\n        name: this.state.newName ,\n        // 2.8 puhelinnumero\n        number: this.state.newNumber\n    }\n\n    // 2.7 ei tuplia\n    const result = this.state.persons.find( person => person.name === entryObject.name );\n    //console.log(\"TUPLA: \", result, 'persons: ', this.state.persons,  'entry: ', entryObject)\n    if (result) {\n      // 2.17 korvataan numero\n      const msg = result.name.concat(' [' , result.id, '] on jo luettelossa, korvataanko vanha numero uudella?')\n      //const msg = result.name.concat(' on jo luettelossa, korvataanko vanha numero uudella?')\n      if (window.confirm(msg)) { \n        result.number = entryObject.number\n        personService\n        .update(result.id, result)\n        .then(response => {\n          console.log(response)\n          this.setState({\n            persons: this.state.persons,\n            info: 'korvattiin '.concat(result.name).concat(' numero: ',result.number)\n          })\n        })\n          // 2.19 virhe kiinni\n          .catch(error => {\n          this.setState({\n            info: `henkilö '${result.name}' on poistettu palvelimelta`,\n            persons: this.state.persons.filter(n => n.id !== result.id)\n          })\n          setTimeout(() => {\n            this.setState({info: null})\n          }, 5000)\n        })    \n      }\n    return\n    }\n    if (result == null) {\n      personService\n        .create(entryObject)\n        .then(person => {\n          console.log('AddEntry: respnse: ', person)\n          this.setState({\n            persons: this.state.persons.concat(person),\n            newName: '',\n            newNumber: '',\n            info: 'lisättiin '.concat(person.name)\n          })\n          setTimeout(() => {\n            this.setState({info: null})\n          }, 5000)          \n        })\n    }    \n  }\n\n  handleEntryChange = (event) => {\n    //console.log('handleEntryChange: ', event.target.value)\n    this.setState({ newName: event.target.value })\n  }\n\n  // 2.8 puhelinnumero\n  handleNumberChange = (event) => {\n    //console.log('handleEntryChange: ', event.target)\n    this.setState({ newNumber: event.target.value })\n  }\n\n  // 2.9 suodatus\n  handleFilterChange = (event) => {\n    //console.log('handleEntryChange: ', event.target)\n    this.setState({ filter: event.target.value })\n  }\n\n  // 2.16 poista\n  handleDelete = (event) => {\n    console.log('handleDelete: [', event.target.id, ']')\n    if (event.target.id) {\n      const personToDelete = this.state.persons.find( person => String(person.id) === String(event.target.id))\n\n      if (personToDelete) {\n        if (window.confirm('Poistetaanko '.concat(personToDelete.name).concat(' [' , event.target.id, ']?'))) { \n        //if (window.confirm('Poistetaanko '.concat(personToDelete.name).concat('?'))) { \n          personService\n            .deletePerson(personToDelete.id)\n            .then(response => {\n              console.log(response)\n              const persons = this.state.persons.filter(n => n.id !== personToDelete.id)\n              this.setState({\n                persons: persons,\n                info: 'poistettiin '.concat(personToDelete.name)\n              })\n            })\n            // 2.19 virhe kiinni\n            .catch(error => {\n              this.setState({\n                info: `henkilö '${personToDelete.name}' on jo valitettavasti poistettu palvelimelta`,\n                persons: this.state.persons.filter(n => n.id !== personToDelete.id)\n              })\n              setTimeout(() => {\n                this.setState({info: null})\n              }, 5000)\n            })            \n        }\n      }\n    }\n    //this.setState({ filter: event.target.value })\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Otsikko nimi='Puhelinluettelo' />\n\n        <Notification message = {this.state.info} />\n\n        <Suodatus filter={this.state.filter} filterChange={this.handleFilterChange} />\n\n        <Otsikko nimi='Lisää uusi' />\n\n        <UusiHenkilo handleAddEntry={this.addEntry}\n                     newName={this.state.newName}\n                     handleEntryChange={this.handleEntryChange}\n                     newNumber={this.state.newNumber}\n                     handleNumberChange={this.handleNumberChange}\n                     />\n\n        <Otsikko nimi='Numerot' />\n\n        <Names persons={this.state.persons} filter={this.state.filter} deleteHandler={this.handleDelete}/>\n\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\n\nReactDOM.render(\n  <App  />,\n  document.getElementById('root')\n)"],"sourceRoot":""}